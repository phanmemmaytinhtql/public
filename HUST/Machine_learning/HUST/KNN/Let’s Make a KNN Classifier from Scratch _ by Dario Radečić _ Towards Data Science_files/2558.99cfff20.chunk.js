(self.webpackChunklite=self.webpackChunklite||[]).push([[2558],{67375:(e,n,t)=>{"use strict";t.d(n,{I:()=>i});var r=t(28655),o=t.n(r);function s(){var e=o()(["\n  fragment getSlateBodyFromPostBodyModel_bodyModel on RichText {\n    paragraphs {\n      id\n      name\n      text\n      type\n      markups {\n        type\n        start\n        end\n        href\n        anchorType\n        userId\n        linkMetadata {\n          httpStatus\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}var i=(0,t(71439).Ps)(s())},51176:(e,n,t)=>{"use strict";t.d(n,{Q:()=>r});var r=t(67294).createContext({isEditing:!1,setIsEditing:function(){return null},setEditingQuote:function(){return null}})},24745:(e,n,t)=>{"use strict";t.d(n,{E:()=>ye});var r=t(63038),o=t.n(r),s=t(67294),i=t(24548),a=t(28309),l=function(e){var n=e.title,t=e.backgroundColor,r=(0,a.Iq)();return s.createElement("div",{className:r((function(){return{color:"white",backgroundColor:t,borderRadius:"2px",fontSize:"11px",padding:"0px 6px",height:"16px",display:"flex",alignItems:"center",marginLeft:"8px",marginTop:"2px"}}))},n)},u=t(85740),c=t(86280),p=t(98281),d=t(41832),m=t(7530),f=t(64504),g=t(27572),v=t(67297),y=t(93394),b=t(27952),h=t(59713),P=t.n(h),E=t(46829),R=t(12291),O=t(28774),x=t(2074),S=t(32262),D=t(18970),I=t(62630),C=t(85277);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(e){var n,t,r=e.response,i=e.parentPost,a=e.hidePopoverMenu,l=(0,c.YC)().value,u=(0,I.Av)(),p=(0,g.pK)(),d=(0,R.I0)(),f=s.useState(!1),v=o()(f,2),y=v[0],b=v[1],h=function(){return b(!1)},P=null==r||null===(n=r.creator)||void 0===n?void 0:n.id,T=(0,E.useMutation)(O.zu,{variables:{targetUserId:P,userId:null==l?void 0:l.id},update:function(e){var n={postId:i.id,postResponsesPaging:{limit:10}},t=e.readQuery({query:x.g,variables:n}),r=j(t,P);null!==r&&e.writeQuery({query:x.g,data:r,variables:n})},optimisticResponse:{__typename:"Mutation",blockUser:{__typename:"User",id:P,isBlocking:!0}},onCompleted:function(){h(),d((0,C.Dx)({message:"Responses by this user have been hidden from this story."}))}}),_=o()(T,1)[0],w=null===(t=i.creator)||void 0===t?void 0:t.id,k=(null==l?void 0:l.id)===w;return(null==l?void 0:l.id)===P?null:l&&P&&k?s.createElement(s.Fragment,null,s.createElement(S.Sl,null,s.createElement(m.rU,{onClick:function(){b(!0)}},"Block this author")),y&&s.createElement(D.Z,{onConfirm:function(){u.event("user.blocked",{userId:P,source:p}),_()},isVisible:y,isInResponsesSidebar:!0,hide:function(){h(),a()}})):null},j=function(e,n){var t,r=null==e||null===(t=e.post)||void 0===t?void 0:t.postResponses;if(!e||!n||null==r||!r.responsesConnection||null===(null==r?void 0:r.count))return null;var o=r.responsesConnection.stream,s=o.filter((function(e){var t,r;return(null===(t=e.itemType.post)||void 0===t||null===(r=t.creator)||void 0===r?void 0:r.id)!==n}));if(s.length===o.length)return null;var i=o.length-s.length;return _(_({},e),{},{post:_(_({},e.post),{},{postResponses:_(_({},r),{},{count:r.count-i,responsesConnection:_(_({},r.responsesConnection),{},{stream:s})})})})},k=t(28655),M=t.n(k),A=t(71439),U=t(14267),B=t(43522),F=t(54260);function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Q=function(e,n){var t,r,o,s,i=e;return i&&null!==(t=i.threadedPostResponses)&&void 0!==t&&null!==(r=t.posts)&&void 0!==r&&r.some((function(e){return e.id===n}))?L(L({},i),{},{postResponses:{count:((null===(o=i.postResponses)||void 0===o?void 0:o.count)||1)-1},threadedPostResponses:L(L({},i.threadedPostResponses),{},{posts:((null===(s=i.threadedPostResponses)||void 0===s?void 0:s.posts)||[]).filter((function(e){return e.id!==n}))})}):null},$=function(e){var n=e.isDialogOpen,t=e.dialogHeading,r=e.dialogDescription,o=e.cancelDialogAction,i=e.confirmDialogAction,a=e.confirmDialogButtonText,l=e.confirmButtonStyle,u=void 0===l?"STRONG":l,c=e.hide,p=void 0===c?function(){}:c,d=s.useContext(U.D).sidebarRef,g=function(e){var n;null!=d&&null!==(n=d.current)&&void 0!==n&&n.style&&(d.current.style.overflowY=e?"hidden":"")};return s.useEffect((function(){return g(n),function(){g(!1)}}),[n]),s.createElement(m.Vq,{isVisible:n,hide:p,withCloseButton:!1,noPortal:!0,padding:50},s.createElement(m.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},s.createElement(f.X6,{scale:"M"},t),s.createElement(m.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"40px",textAlign:"center"},s.createElement(f.F,{scale:"M",color:"DARKER"},r)),s.createElement(m.xu,{display:"flex",marginBottom:"20px"},s.createElement(m.rU,{onClick:o},s.createElement(f.F,{scale:"M",color:"DARKER"},"Cancel")),s.createElement(m.xu,{marginLeft:"25px"},s.createElement(m.zx,{buttonStyle:u,onClick:i,"data-test-id":"close-discussion-button"},a)))))},H=t(14391),K=function(e){var n=e.isDialogOpen,t=e.cancelDialogAction,r=e.confirmDialogAction,o=e.responseDistribution,i=e.hide,a=o===H.Et.DISTRIBUTED,l=a?"Delete response and story":"Delete",u=a?"This response is also a story on your profile. Are you sure you want to delete this response?":s.createElement("div",null,"Deleted responses are gone forever.",s.createElement("br",null),"Are you sure?");return s.createElement($,{isDialogOpen:n,dialogHeading:l,dialogDescription:u,cancelDialogAction:t,confirmDialogAction:r,confirmDialogButtonText:"Delete Response",confirmButtonStyle:"ERROR",hide:i})};function q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?q(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Y(){var e=M()(["\n  mutation DeleteResponseMutation($responseId: ID!) {\n    deletePost(targetPostId: $responseId)\n  }\n"]);return Y=function(){return e},e}var Z=(0,A.Ps)(Y()),J=function(e){var n,t,r=e.response,i=e.hidePopoverMenu,a=s.useState(!1),l=o()(a,2),u=l[0],p=l[1],d=(0,I.Av)(),f=(0,g.pK)(),v=(0,R.I0)(),y=(0,c.YC)().value,b=s.useContext(F.H).inResponseToPostId,h=(0,E.useMutation)(Z,{variables:{responseId:r.id},update:function(e){var n,t=e.readFragment({id:"Post:".concat(b),fragment:B.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"});null!==(n=Q(t,r.id))&&(e.writeFragment({id:"Post:".concat(b),fragment:B.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:V({},n)}),d.event("responses.removed",{postId:r.id,source:f}),v((0,C.Dx)({message:"Successfully deleted response."})),i())}}),P=o()(h,1)[0],O=s.useContext(U.D).sidebarRef;return null!=y&&y.id&&(null==y?void 0:y.id)===(null===(n=r.creator)||void 0===n?void 0:n.id)?(null!=O&&O.current&&(t=O.current.scrollTop),s.createElement(s.Fragment,null,s.createElement(S.Sl,null,s.createElement(m.rU,{onClick:function(){return p(!0)}},"Delete")),u&&s.createElement(K,{isDialogOpen:u,cancelDialogAction:function(){p(!1),null!=O&&O.current&&(O.current.scrollTop=t)},confirmDialogAction:P,responseDistribution:r.responseDistribution,hide:function(){return p(!1)}}))):null},W=t(51176),z=function(e){var n=e.isDialogOpen,t=e.cancelDialogAction,r=e.confirmDialogAction;return s.createElement($,{isDialogOpen:n,dialogHeading:"Edit response and story",dialogDescription:"This response is also a story on your profile. Any edits are applied to both.",cancelDialogAction:t,confirmDialogAction:r,confirmDialogButtonText:"Continue",confirmButtonStyle:"STRONG"})},G=function(e){var n,t,r=e.response,i=(0,c.YC)().value,a=s.useState(!1),l=o()(a,2),u=l[0],p=l[1],d=s.useContext(W.Q),f=d.setIsEditing,g=d.isEditing,v=d.setEditingQuote,y=(null===(n=r.creator)||void 0===n?void 0:n.id)===(null==i?void 0:i.id),b=s.useContext(U.D).sidebarRef;if(null!=b&&b.current&&(t=b.current.scrollTop),!y)return null;var h=r.responseDistribution===H.Et.DISTRIBUTED;return s.createElement(s.Fragment,null,s.createElement(S.Sl,null,s.createElement(m.rU,{onClick:function(){h?p(!0):(r.inResponseToMediaResource&&v(r.inResponseToMediaResource.mediumQuote),f(!g))}},"Edit this response")),u&&s.createElement(z,{isDialogOpen:u,cancelDialogAction:function(){p(!1),null!=b&&b.current&&(b.current.scrollTop=t)},confirmDialogAction:function(){p(!1),null!=b&&b.current&&(b.current.scrollTop=t),r.inResponseToMediaResource&&v(r.inResponseToMediaResource.mediumQuote),f(!g)}}))};function X(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?X(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ne(){var e=M()(["\n  mutation HidePostResponseOnParentMutation($parentPostId: ID!, $postResponseId: ID!) {\n    hidePostResponseOnParentPost(parentPostId: $parentPostId, postResponseId: $postResponseId)\n  }\n"]);return ne=function(){return e},e}var te=(0,A.Ps)(ne()),re=function(e){var n,t,r,i=e.responseToBeHidden,a=e.parentPost,l=e.hidePopoverMenu,u=(0,c.YC)().value,p=(0,R.I0)(),d=(0,I.Av)(),f=(0,g.pK)(),v=s.useContext(F.H).inResponseToPostId,y=v,b=(null==u?void 0:u.id)===(null===(n=a.creator)||void 0===n?void 0:n.id),h=null==a||null===(t=a.collection)||void 0===t?void 0:t.viewerIsEditor,P=(null==u?void 0:u.id)===(null===(r=i.creator)||void 0===r?void 0:r.id),O=(0,E.useMutation)(te,{variables:{postResponseId:i.id,parentPostId:y},update:function(e){var n,t=e.readFragment({id:"Post:".concat(v),fragment:B.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"});null!==(n=Q(t,i.id))&&(e.writeFragment({id:"Post:".concat(v),fragment:B.K,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:ee({},n)}),d.event("response.hidden",{postId:i.id,source:f}),p((0,C.Dx)({message:"",toastStyle:"HIDE_POST_RESPONSE",extraParams:{responseId:i.id,parentPostId:y}})),l())}}),x=o()(O,1)[0];return P?null:b||h?s.createElement(S.Sl,null,s.createElement(m.rU,{onClick:x},"Hide this response")):null},oe=t(33241),se=t(62181),ie=t(90639),ae=function(e){var n,t=e.response,r=e.parentPost,i=e.hidePopoverMenu,a=(0,c.YC)().value,l=(0,I.Av)(),u=(0,g.pK)(),p=s.useState(!1),d=o()(p,2),f=d[0],v=d[1],y=function(e){var n,t,r=e.response,i=r.id,a=null===(n=r.creator)||void 0===n?void 0:n.id,l=null===(t=r.creator)||void 0===t?void 0:t.isBlocking,u=(0,R.I0)(),c=(0,E.useMutation)(oe.g,{variables:{targetPostId:i,targetAuthorId:a,alsoBlockAuthor:!1,reason:"Spam"},onCompleted:function(){u((0,C.Dx)({message:"Successfully reported post."}))}}),p=o()(c,2),d=p[0],m=p[1];return{reportStory:s.useCallback((function(e){var n=e.alsoBlockAuthor,t=void 0!==n&&n,r=e.reportReason;return d({variables:{targetPostId:i,targetAuthorId:a,alsoBlockAuthor:t,reason:void 0===r?"Spam":r},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:a,isBlocking:l||t}}})}),[r,d]),error:null==m?void 0:m.error,loading:null==m?void 0:m.loading}}({response:t}).reportStory,b=(null==a?void 0:a.id)===(null===(n=t.creator)||void 0===n?void 0:n.id);return!t.creator||b?null:s.createElement(s.Fragment,null,s.createElement(S.Sl,null,null!=a&&a.id?s.createElement(m.rU,{onClick:function(){return v(!0)}},"Report this response"):s.createElement(se.R9,{operation:"register",post:r,susiEntry:"respond_sidebar"},"Report this response")),s.createElement(ie.Z,{onSubmit:function(e,n){return l.event("response.flagged",{postId:t.id,reason:n,source:u}),y({alsoBlockAuthor:e,reportReason:n})},isVisible:f,hide:function(){v(!1),i()},isResponse:!0}))},le=t(965),ue=t(65347),ce=t(55573),pe=function(e){var n=e.response,t=e.hidePopoverMenu,r=(0,le.CP)(),o=(0,I.Av)(),i=(0,c.YC)().value,a=(0,g.pK)(),l=(0,v.b)((function(e){return e.multiVote.clapsPerPost})),u=(0,R.I0)(),p=s.useCallback((function(e){return u((0,ue.at)(e))}),[u]),d=(0,ce.l)(l,n),f=d.clapCount,y=d.viewerClapCount;return null!=i&&i.id&&0!==f&&0!==y?s.createElement(S.Sl,null,s.createElement(m.rU,{onClick:function(){r(n,(null==i?void 0:i.id)||"",-y),p({postId:n.id,clapCount:f-y,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),o.event("post.clientUnvote",{postId:n.id,postIds:[n.id],unvoteCount:y,source:a}),t()}},"Undo applause for this response")):null},de=t(26912),me=t(6688),fe={position:"absolute !important",top:"-16px",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"150px"},ge=function(e){var n=e.response,t=e.responseType,r=e.parentPost,o=e.isPopoverMenuVisible,i=e.hidePopoverMenu,a=(0,me.I)(),l=n.creator,u=s.useRef(null);return s.useEffect((function(){var e=function(e){var n;null!=u&&null!==(n=u.current)&&void 0!==n&&n.contains(e.target)||i()};if(o)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[o]),n&&l?s.createElement("div",{className:a(fe),ref:u},s.createElement(S.mX,null,s.createElement(ae,{response:n,parentPost:r,hidePopoverMenu:i}),s.createElement(re,{responseToBeHidden:n,parentPost:r,hidePopoverMenu:i}),s.createElement(w,{response:n,parentPost:r,hidePopoverMenu:i}),t===de.Q.SIMPLE&&s.createElement(pe,{response:n,hidePopoverMenu:i}),t===de.Q.SIMPLE&&s.createElement(G,{response:n}),s.createElement(J,{response:n,hidePopoverMenu:i}))):null},ve=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},ye=function(e){var n,t=e.response,r=e.responseType,h=e.parentPost,P=(0,c.YC)().value,E=(0,a.Iq)(),R=(0,a.Fg)(),O=t.creator,x=t.mediumUrl,S=t.createdAt,D=s.useState(!1),I=o()(D,2),C=I[0],T=I[1],_=(0,v.v)((function(e){return e.config.authDomain}));if(!t||!O||!x)return null;var w=(null===(n=h.creator)||void 0===n?void 0:n.id)===O.id,j=(null==P?void 0:P.id)===O.id,k=function(e,n){return e&&n===de.Q.SIMPLE}(t,r)&&(null==t?void 0:t.firstPublishedAt)!==(null==t?void 0:t.latestPublishedAt),M=s.createElement(m.rU,{href:(0,b.AWr)(O,_)},s.createElement(f.F,{scale:"M",color:"DARKER"},O.name));return s.createElement(s.Fragment,null,s.createElement(m.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between"},s.createElement(m.xu,{display:"flex",flexDirection:"row",alignItems:"center"},s.createElement(p.ZP,{scale:"XS",user:O}),s.createElement(m.xu,{paddingLeft:"12px"},s.createElement(m.xu,{display:"flex",flexDirection:"row"},s.createElement(u.bZ,{name:"enable_author_cards_byline",placeholder:function(){return M}},(function(e){return e?s.createElement(m.$W,{placement:"top",targetDistance:15,mouseLeaveDelay:200,popoverRenderFn:function(){return s.createElement(d.Z,{user:O})}},s.createElement(m.rU,{href:(0,b.AWr)(O,_)},s.createElement(f.F,{scale:"M",color:"DARKER"},O.name))):M})),w?s.createElement(l,{title:"AUTHOR",backgroundColor:R.brandColor.sage.dark}):j?s.createElement(l,{title:"YOU",backgroundColor:"#A8A8A8"}):null),s.createElement(m.rU,{href:x,linkStyle:"SUBTLE",inline:!0,noFollow:!0},s.createElement(f.F,{scale:"M"},s.createElement(i.Z,{timestamp:S}),k&&s.createElement(s.Fragment,null,"Â (edited)"))))),s.createElement(m.rU,{onClick:function(e){e.nativeEvent.stopPropagation(),T(!C)},inline:!0,className:E(ve)},s.createElement(y.Z,null))),C&&s.createElement("div",{className:E({position:"relative"})},s.createElement(g.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},s.createElement(ge,{response:t,responseType:r,parentPost:h,isPopoverMenuVisible:C,hidePopoverMenu:function(){return T(!1)}}))))}},13787:(e,n,t)=>{"use strict";t.d(n,{F:()=>l});var r=t(28655),o=t.n(r),s=t(71439),i=t(98281);function a(){var e=o()(["\n  fragment ResponseHeader_post on Post {\n    createdAt\n    creator {\n      ...UserAvatar_user\n      isBlocking\n    }\n    mediumUrl\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,s.Ps)(a(),i.WQ)},51151:(e,n,t)=>{"use strict";t.d(n,{J:()=>y,u:()=>b});var r=t(28655),o=t.n(r),s=t(59713),i=t.n(s),a=t(71439),l=t(67294),u=t(19692),c=t(28309),p=t(14391),d=t(58357),m=t(83024);function f(){var e=o()(["\n  fragment ResponseQuote_post on Post {\n    inResponseToMediaResource {\n      href\n      mediumQuote {\n        quoteId\n        startOffset\n        endOffset\n        paragraphs {\n          ...TextParagraph_paragraph\n        }\n        ...buildQuotePreviewParagraph_quote\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){i()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var y=function(e){var n=e.inResponseToMediaResource,t=(0,c.Iq)(),r=(0,c.Fg)(),o=(0,d.r)((function(){var e=null==n?void 0:n.href;if(e){var t=null==e?void 0:e.split("#")[1];if(t){var r=t.split("--")[0];if(r){var o=document.getElementById(r);if(o){var s=(null==o?void 0:o.offsetTop)-100;s&&window.scrollTo({top:s,behavior:"smooth"})}}}}}),[null==n?void 0:n.href]),s=null==n?void 0:n.mediumQuote;if(!s)return null;var i=(0,m.eu)(s);if(!i||!i.type)return null;var a=i.type;return a===p.NJ.IMG||a===p.NJ.IFRAME||a===p.NJ.COVER_TITLE||a===p.NJ.HR||a===p.NJ.MIXTAPE_EMBED||a===p.NJ.SECTION_CAPTION?null:l.createElement("div",{onClick:o,onKeyDown:o,role:"button",tabIndex:0,className:t({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",marginTop:"22px",marginBottom:"3px",padding:"20px 16px",cursor:"pointer",backgroundColor:r.backgroundColor})},l.createElement(u.ZP,{paragraph:v(v({},i),{},{name:"embedded-quote-".concat(s.quoteId,"-").concat(i.name)}),paragraphStyle:a,spaceTop:4,richTextStyle:"STREAM"}))},b=(0,a.Ps)(f(),m.Sz,u.Rg)},14267:(e,n,t)=>{"use strict";t.d(n,{D:()=>s});var r=t(67294),o=t(14391),s=r.createContext({setIsSavingResponse:function(){return null},editingResponsesAtIndices:[],setEditingResponsesAtIndices:function(){return null},setInResponseToQuote:function(){return null},sidebarRef:null,responseDistribution:o.Et.NOT_DISTRIBUTED,setResponseDistribution:function(){},rootPostId:"",isResponsesSidebarVisible:!1})},2074:(e,n,t)=>{"use strict";t.d(n,{A:()=>P,g:()=>h});var r=t(28655),o=t.n(r),s=t(71439),i=t(8011),a=t(43522),l=t(41832),u=t(15699),c=t(27952),p=t(13787),d=t(51151);function m(){var e=o()(["\n  fragment StoryResponse_storyResponse on StreamItemPostStoryResponse {\n    post {\n      ...ResponseHeader_post\n      ...ResponseQuote_post\n      id\n      responsesCount\n      creator {\n        isBlocking\n        ...userUrl_user\n        ...UserMentionTooltip_user\n      }\n      clapCount\n      responseDistribution\n      ...PostPresentationTracker_post\n      previewContent {\n        bodyModel {\n          paragraphs {\n            text\n            type\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var f=(0,s.Ps)(m(),p.F,u.h,d.u,c.$mN,l.O),g=t(58992),v=t(31078);function y(){var e=o()(["\n  query PagedThreadedPostResponsesQuery($postId: ID!, $postResponsesPaging: PagingOptions) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      responsesCount\n      postResponses {\n        count\n      }\n      responseRootPost {\n        post {\n          id\n        }\n        responseDepth\n      }\n      threadedPostResponses(paging: $postResponsesPaging) {\n        __typename\n        autoExpandedPostIds\n        pagingInfo {\n          next {\n            limit\n            to\n          }\n        }\n        posts {\n          ... on Post {\n            ...StoryResponse_threadedStoryResponse_post\n            ...SimpleResponse_threadedSimpleResponse_post\n            ...SimpleResponse_threadedSimpleResponse_defaultPostResponses\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}function b(){var e=o()(['\n  query PostResponsesQuery($postId: ID!, $postResponsesPaging: PagingOptions) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      postResponses {\n        count\n        responsesConnection(paging: $postResponsesPaging) @connection(key: "responsesConnection") {\n          pagingInfo {\n            next {\n              limit\n              to\n            }\n          }\n          stream {\n            itemType {\n              __typename\n              ... on StreamItemPostStoryResponse {\n                ...StoryResponse_storyResponse\n              }\n              ... on StreamItemPostSimpleResponse {\n                ...SimpleResponse_simpleResponse\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n  ","\n"]);return b=function(){return e},e}var h=(0,s.Ps)(b(),v.Z,f,i.y),P=(0,s.Ps)(y(),v.Z,a.D,g.t,a.K)},72558:(e,n,t)=>{"use strict";t.d(n,{OT:()=>D,sG:()=>x});var r=t(63038),o=t.n(r),s=t(67294),i=t(2277),a=t(24745),l=t(51151),u=t(14267),c=t(39382),p=t(99046),d=t(54260),m=t(7530),f=t(64504),g=t(28309);function v(){return(v=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var y=s.createElement("path",{d:"M21.27 20.06a9.04 9.04 0 0 0 2.75-6.68C24.02 8.21 19.67 4 14.1 4S4 8.21 4 13.38c0 5.18 4.53 9.39 10.1 9.39 1 0 2-.14 2.95-.41.28.25.6.49.92.7a7.46 7.46 0 0 0 4.19 1.3c.27 0 .5-.13.6-.35a.63.63 0 0 0-.05-.65 8.08 8.08 0 0 1-1.29-2.58 5.42 5.42 0 0 1-.15-.75zm-3.85 1.32l-.08-.28-.4.12a9.72 9.72 0 0 1-2.84.43c-4.96 0-9-3.71-9-8.27 0-4.55 4.04-8.26 9-8.26 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32a5.59 5.59 0 0 0 .21 1.29c.19.7.49 1.4.89 2.08a6.43 6.43 0 0 1-2.67-1.06c-.34-.22-.88-.48-1.16-.74z"});const b=function(e){return s.createElement("svg",v({width:29,height:29},e),y)};var h=function(e){var n=e.response,t=n.postResponses,r=(null==t?void 0:t.count)||0,o=s.useContext(d.H),i=o.isThreadedResponsesVisible,a=o.toggleThreadedResponses,l=o.threadDepthOnPage,u=o.toggleCreateReply,c=o.loadThreadedResponses,v=o.isThreadedResponsesQueryCalled,y=(0,g.Iq)(),h=function(e){return{fill:e.baseColor.fill.normal,height:"25px",width:"25px"}},P=l<3,E=function(e,n){return s.createElement(m.xu,{display:"flex",alignItems:"center"},s.createElement(b,{className:y(h),"aria-label":"responses"}),s.createElement(m.xu,{tag:"span",display:"inline-block",marginLeft:"8px",marginTop:"2px"},s.createElement(f.F,{color:e,tag:"span",scale:"S"},n)))};return s.createElement(m.xu,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:"14px"},s.createElement(m.xu,{display:"flex",alignItems:"center"},s.createElement(p.S,{buttonStyle:"SUBTLE_THREADED_RESPONSE",post:n,shouldShowResponsiveLabelText:!0,susiEntry:"respond_sidebar"}),s.createElement(m.xu,{marginLeft:"12px",display:"flex",alignItems:"center",height:"25px"},P?r>0&&s.createElement(m.rU,{linkStyle:"SUBTLE",onClick:a},E("DARKER",function(e,n){return n?"Hide replies":"".concat(e," ").concat(1===e?"reply":"replies")}(r,i))):n.mediumUrl?s.createElement(m.rU,{linkStyle:"SUBTLE",href:n.mediumUrl},E("ACCENT","Continue this thread")):null)),P&&s.createElement(m.xu,{paddingRight:"6px"},s.createElement(f.F,{color:"DARKER",scale:"M"},s.createElement(m.rU,{onClick:function(){v||c(),u()},inline:!0},"Reply"))))},P=t(26912),E=t(72955),R=t(15699),O=t(29035),x=function(e){return e.join("").length>320?"char":e.join("\n").split("\n").length>c._W?"line":"none"},S=function(){return{border:"none",padding:"0 0 5px",cursor:"pointer"}},D=function(e){var n,t=e.simpleResponse,r=e.parentPost,p=e.omitBottomBorder,d=t.creator,v=t.content,y=t.mediumUrl,b=s.useState(!1),D=o()(b,2),I=D[0],C=D[1],T=s.useRef(null),_=(0,g.Iq)(),w=s.useContext(u.D).sidebarRef;(0,E.Vj)(T,t,w);var j=null==v||null===(n=v.bodyModel)||void 0===n?void 0:n.paragraphs;if(!(d&&v&&j&&y))return null;var k=j.map((function(e){return e.text||""})),M=x(k),A="none"!==M,U=A&&!I,B=(0,O.ic)(navigator&&navigator.userAgent);return s.createElement(R.Z,{post:t,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!A},s.createElement(m.xu,{paddingTop:"25px",paddingBottom:B&&p?"48px":"16px",borderBottom:p?void 0:"BASE_LIGHTER",ref:T},s.createElement(a.E,{response:t,responseType:P.Q.SIMPLE,parentPost:r}),s.createElement(l.J,{inResponseToMediaResource:t.inResponseToMediaResource}),s.createElement(m.xu,{marginTop:"5px"},s.createElement(i.c.Provider,{value:!0},s.createElement(c.YN,{paragraphs:j,truncateStrategy:M,isExpanded:I}))),U&&s.createElement("button",{onClick:function(){return C(!0)},className:_(S)},s.createElement(f.F,{scale:"S",color:"ACCENT",tag:"span"},"Read More")),s.createElement(h,{response:t})))}},39382:(e,n,t)=>{"use strict";t.d(n,{_W:()=>f,YN:()=>v});var r=t(59713),o=t.n(r),s=t(67294),i=t(79914),a=t(7530),l=t(64504),u=t(28309),c=t(14391),p=t(50993);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){o()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=5;function g(e,n,t){return"char"===e&&n>250||"line"===e&&t>f}function v(e){var n=e.paragraphs,t=e.truncateStrategy,r=e.isExpanded,o=(0,u.Iq)(),d=0,f=0,v="none"!==t&&!r;return s.createElement("pre",{className:o({whiteSpace:"pre-wrap"})},n.map((function(e){if(!r&&g(t,d,f))return null;var n=(null==e?void 0:e.text)||"";d+=n.length||0,f+=n.split("\n").length||0;var u=m(m({},e),{},{dropCapImage:null,hasDropCap:null}),y=!r&&g(t,d,f);if(y&&"char"===t){var b=250-(d-n.length||0);u.markups=u.markups.reduce((function(e,n){if(n.start<b){var t=m({},n);t.end>b&&(t.end=b),e.push(t)}return e}),[]),u.text=(0,p.N8)(n,b)}return s.createElement(a.xu,{padding:"5px 0px",key:e.name||e.id},s.createElement(l.F,{scale:"M",color:"DARKER",tag:"div"},s.createElement("div",{className:o({lineHeight:"24px"})},s.createElement(i.T2,{paragraph:u,richTextStyle:"FULL_PAGE",paragraphStyle:c.NJ.P}),v&&y&&"...")))})).filter((function(e){return!!e})))}},8011:(e,n,t)=>{"use strict";t.d(n,{y:()=>d});var r=t(28655),o=t.n(r),s=t(71439),i=t(67375),a=t(51151),l=t(41832),u=t(72955),c=t(27952);function p(){var e=o()(["\n  fragment SimpleResponse_simpleResponse on StreamItemPostSimpleResponse {\n    post {\n      id\n      createdAt\n      firstPublishedAt\n      latestPublishedAt\n      title\n      creator {\n        id\n        name\n        username\n        imageId\n        mediumMemberAt\n        isBlocking\n        ...userUrl_user\n        ...UserMentionTooltip_user\n      }\n      clapCount\n      viewerClapCount\n      isPublished\n      voterCount\n      responsesCount\n      allowResponses\n      latestRev\n      recommenders {\n        id\n        name\n      }\n      mediumUrl\n      content {\n        bodyModel {\n          paragraphs {\n            text\n          }\n          ...getSlateBodyFromPostBodyModel_bodyModel\n        }\n      }\n      collection {\n        id\n        slug\n      }\n      isLimitedState\n      responseDistribution\n      ...PostPresentationTracker_post\n      ...PostScrollTracker_post\n      ...ResponseQuote_post\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var d=(0,s.Ps)(p(),u.h_,u.kH,a.u,i.I,c.$mN,l.O)},43522:(e,n,t)=>{"use strict";t.d(n,{D:()=>f,K:()=>g});var r=t(28655),o=t.n(r),s=t(71439),i=t(67375),a=t(51151),l=t(58992),u=t(41832),c=t(72955),p=t(27952);function d(){var e=o()(["\n  fragment SimpleResponse_threadedSimpleResponse_defaultPostResponses on Post {\n    responsesCount\n    postResponses {\n      count\n    }\n    threadedPostResponses(paging: {limit: 10}) {\n      __typename\n      autoExpandedPostIds\n      pagingInfo {\n        next {\n          limit\n          to\n        }\n      }\n      posts {\n        ... on Post {\n          ...StoryResponse_threadedStoryResponse_post\n          ...SimpleResponse_threadedSimpleResponse_post\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function m(){var e=o()(["\n  fragment SimpleResponse_threadedSimpleResponse_post on Post {\n    id\n    createdAt\n    firstPublishedAt\n    latestPublishedAt\n    title\n    creator {\n      id\n      name\n      username\n      imageId\n      mediumMemberAt\n      isBlocking\n      ...userUrl_user\n      ...UserMentionTooltip_user\n    }\n    clapCount\n    viewerClapCount\n    isPublished\n    voterCount\n    responsesCount\n    postResponses {\n      count\n    }\n    allowResponses\n    latestRev\n    recommenders {\n      id\n      name\n    }\n    mediumUrl\n    content {\n      bodyModel {\n        paragraphs {\n          text\n        }\n        ...getSlateBodyFromPostBodyModel_bodyModel\n      }\n    }\n    collection {\n      id\n      slug\n    }\n    isLimitedState\n    inResponseToType\n    responseDistribution\n    ...PostPresentationTracker_post\n    ...PostScrollTracker_post\n    ...ResponseQuote_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var f=(0,s.Ps)(m(),c.h_,c.kH,a.u,i.I,p.$mN,u.O),g=(0,s.Ps)(d(),l.t,f)},58992:(e,n,t)=>{"use strict";t.d(n,{t:()=>d});var r=t(28655),o=t.n(r),s=t(71439),i=t(41832),a=t(15699),l=t(27952),u=t(13787),c=t(51151);function p(){var e=o()(["\n  fragment StoryResponse_threadedStoryResponse_post on Post {\n    id\n    responsesCount\n    postResponses {\n      count\n    }\n    creator {\n      isBlocking\n      ...userUrl_user\n      ...UserMentionTooltip_user\n    }\n    clapCount\n\n    previewContent {\n      bodyModel {\n        paragraphs {\n          text\n          type\n        }\n      }\n    }\n    responseDistribution\n    ...PostPresentationTracker_post\n    ...ResponseHeader_post\n    ...ResponseQuote_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var d=(0,s.Ps)(p(),u.F,a.h,c.u,l.$mN,i.O)},54260:(e,n,t)=>{"use strict";t.d(n,{H:()=>r});var r=t(67294).createContext({inResponseToPostId:"",isThreadedResponsesVisible:!1,toggleThreadedResponses:function(){},showThreadedResponses:function(){},threadDepthFromRootPost:0,threadDepthOnPage:0,hideCreateReply:function(){},toggleCreateReply:function(){},loadThreadedResponses:function(){},isThreadedResponsesQueryCalled:!1,isThreadedResponsesQueryLoading:!1})},31078:(e,n,t)=>{"use strict";t.d(n,{Eq:()=>I,Z:()=>T});var r=t(59713),o=t.n(r),s=t(63038),i=t.n(s),a=t(28655),l=t.n(a),u=t(71439),c=t(46829),p=t(67294),d=t(32262),m=t(7530),f=t(64504),g=t(62630),v=t(27572),y=t(28309);function b(){var e=l()(["\n  query FetchPostResponsesLockedQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function h(){var e=l()(["\n  fragment CloseDiscussion_post on Post {\n    id\n    responsesLocked\n    isLockedResponse\n  }\n"]);return h=function(){return e},e}function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){o()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function R(){var e=l()(["\n  mutation UnlockResponsesOnPostMutation($postId: ID!) {\n    unlockResponsesOnPost(postId: $postId)\n  }\n"]);return R=function(){return e},e}function O(){var e=l()(["\n  mutation LockResponsesOnPostMutation($postId: ID!) {\n    lockResponsesOnPost(postId: $postId)\n  }\n"]);return O=function(){return e},e}var x=function(){return{fontStyle:"italic",textAlign:"center"}},S=(0,u.Ps)(O()),D=(0,u.Ps)(R()),I=function(e){var n,t=e.parentPostId,r=e.responsesLocked,o=e.hidePopoverMenu,s=(0,y.Iq)(),a=(0,g.Av)(),l=(0,v.pK)(),u=p.useState(!1),b=i()(u,2),h=b[0],P=b[1],E=(0,c.useMutation)(S,{variables:{postId:t},update:function(e){a.event("responses.locked",{postId:t,source:l}),C(e,t,!0,o)}}),R=i()(E,1)[0],O=(0,c.useMutation)(D,{variables:{postId:t},update:function(e){C(e,t,!1,o)}}),I=i()(O,1)[0];return n=!0===r?p.createElement(m.rU,{onClick:I},"Open discussion"):p.createElement(m.rU,{onClick:function(){return P(!0)}},"Close discussion"),p.createElement(p.Fragment,null,p.createElement(d.Sl,null,n),h&&p.createElement(m.Vq,{isVisible:h,hide:function(){return P(!1)},withCloseButton:!1,noPortal:!0,padding:50},p.createElement(m.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},p.createElement(f.X6,{scale:"M"},"Close Discussion"),p.createElement(m.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"70px",textAlign:"center"},p.createElement(f.F,{scale:"M",color:"DARKER"},"Closing a discussion prevents responses from being added or edited on your story. Existing responses will remain on your story.")),p.createElement(m.xu,{display:"flex",marginBottom:"20px"},p.createElement(m.rU,{onClick:function(){return P(!1)}},p.createElement(f.F,{scale:"M",color:"DARKER"},"Cancel")),p.createElement(m.xu,{marginLeft:"25px"},p.createElement(m.zx,{buttonStyle:"ERROR",onClick:R,"data-test-id":"close-discussion-button"},"Close discussion"))),p.createElement("div",{className:s(x)},p.createElement(f.F,{scale:"M"},"You can reopen the discussion at any time.")))))},C=function(e,n,t,r){var o=e.readQuery({query:_,variables:{postId:n}});o&&(e.writeQuery({query:_,data:Object.assign({},o,{post:E(E({},o.post),{},{responsesLocked:t})}),variables:{postId:n}}),r())},T=(0,u.Ps)(h()),_=(0,u.Ps)(b(),T)},26912:(e,n,t)=>{"use strict";var r;t.d(n,{Q:()=>r}),function(e){e.SIMPLE="SIMPLE",e.STORY="STORY"}(r||(r={}))}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/2558.99cfff20.chunk.js.map